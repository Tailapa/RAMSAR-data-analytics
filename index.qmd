---
title: "India’s RAMSAR Sites: A Geometric Analysis"
subtitle: "Evaluating Wetland Conservation Trends and Ecological Data"
author: "Shashank Venkatesh"
date: last-modified
format:
  html:
    theme: cosmo
    toc: true
    toc-depth: 2
    toc-location: left
    code-fold: false
    code-tools: true
    embed-resources: true
execute:
  echo: true
  warning: false
  message: false
bibliography: references.bib
editor_options: 
  chunk_output_type: console
---

## Data Source

The foundational data for this analysis is sourced from the **Open Government Data (OGD) Platform India** catalog on **Ramsar Sites Details**.
This dataset provides the geometric coordinates, area in hectares, and designation dates for the wetlands, allowing for a precise spatial and temporal analysis.

```{r}
#| label: load the dataset
library(tidyverse)
library(tidymodels)
library(scales) # For formatting legend numbers
library(jsonlite)
library(sf)
library(rnaturalearth)
library(rnaturalearthdata)
library(ggrepel) # For non-overlapping labels
library(plotly)

# URL of the RAMSAR API
api_url <- "https://indianwetlands.in/wp-content/themes/wetlands/restapi-ramsar.php"

# Fetch and parse the data
# Note: Sometimes government APIs require a 'User-Agent' header to allow access
ramsar_json <- fromJSON(api_url)

# Convert to a data frame
# The API usually returns a nested list; we simplify it here
ramsar_data <- as.data.frame(ramsar_json)

```

## Glimpse of the dataframe

```{r}
#| label: glimpse into the dataframe
#| message: false
#| warning: false
glimpse(ramsar_data)
```

The dataset has **`r nrow(ramsar_data)`** rows and **`r ncol(ramsar_data)`** columns.

## Data Cleaning and Preparation

to ensure all "geometric coordinates" and sizes are correctly typed.

```{r}
#| label: Converting chr strings to proper data types
#| message: false
#| warning: false
# Convert character strings to numeric and date types
ramsar_clean <- ramsar_data |>
  mutate(
    Area = as.numeric(Area),
    Latitude = as.numeric(Latitude),
    Longitude = as.numeric(Longitude),
    Date = as.Date(DesignationDate),
    Year = as.numeric(format(Date, "%Y"))
  ) |>
  arrange(Date) |>
  mutate(cumulative_sites = row_number())
```

## Geographical Distribution of Wetlands in India

```{r}
#| label: Geographical Distribution of wetlands in India
# 2. Get India's high-resolution boundary (sf format)
india_map <- ne_countries(scale = "large", country = "India", returnclass = "sf")

# 3. Convert our RAMSAR dataframe into a spatial object (sf)
# We ensure Latitude/Longitude are numeric first
ramsar_sf <- ramsar_clean |>
  filter(!is.na(Latitude) & !is.na(Longitude)) |>
  st_as_sf(coords = c("Longitude", "Latitude"), crs = 4326)

# 4. Plotting the Geometric Map
ggplot() +
  # Draw the base map of India with a minimalist geometric style
  geom_sf(data = india_map, fill = "#F8F9FA", color = "#ADB5BD", size = 0.3) +
  
  # Plot wetlands as geometric bubbles
  # Size is proportional to the Area; color is our signature Teal
  geom_sf(data = ramsar_sf, 
          aes(size = Area), 
          color = "#2A9D8F", 
          alpha = 0.6) +
  
  # Add labels only for the top 5 largest sites to keep it "geometric and clean"
  geom_text_repel(data = ramsar_sf |> slice_max(Area, n = 5),
                  aes(label = WetlandName, geometry = geometry),
                  stat = "sf_coordinates",
                  size = 3, 
                  fontface = "bold",
                  family = "sans",
                  color = "#264653",
                  box.padding = 0.5) +
  
  # Formatting the scales and legend
  scale_size_continuous(range = c(1, 12), 
                        labels = label_comma(),
                        name = "Area (Hectares)") +
  
  # Apply a minimalist void theme
  theme_void() +
  labs(
    title = "GEOSPATIAL ARCHITECTURE OF INDIA'S RAMSAR SITES",
    subtitle = "Analysis of 96 internationally significant wetlands as of Dec 2025",
    caption = "Data Source: Open Government Data (OGD) Platform India | Projection: WGS84"
  ) +
  
  # Styling the typography
  theme(
    plot.title = element_text(family = "sans", face = "bold", size = 18, color = "#264653", hjust = 0.5),
    plot.subtitle = element_text(family = "sans", size = 11, color = "#666666", hjust = 0.5, margin = margin(b = 20)),
    legend.position = c(0.85, 0.2),
    plot.background = element_rect(fill = "white", color = NA)
  )

```

## The Acceleration of Conservation: A Temporal Growth Analysis

### How has the rate of RAMSAR designations in India changed over the last three decades, particularly since the 2020s?

to pinpoint the "inflection point" where India’s wetland conservation policy shifted into high gear.

```{r}
#| label: temporal growth analysis
#| message: false
#| warning: false
ggplot(ramsar_clean, aes(x = Date, y = cumulative_sites)) +
  #geom_area(fill = "#2A9D8F", alpha = 0.2) +
  geom_line(color = "#2A9D8F", size = 0.5) +
  geom_point(data = filter(ramsar_clean, Year >= 2020), 
             color = "#E63946", size = 1) +
  labs(
    title = "The Exponential Rise of Indian RAMSAR Sites",
    subtitle = "Cumulative designations from 1981 to December 2025",
    x = "Year of Designation", y = "Total Number of Sites"
  ) +
  theme_minimal() +
  theme(panel.grid.minor = element_blank(),
        plot.title = element_text(face = "bold", size = 16, color = "#264653"))
```

## State-wise Distribution: The Pareto of Wetlands

### Does a small number of states hold the majority of India's RAMSAR designations, or is it evenly distributed?

Count sites by `StateName` and sort them in descending order.

Highlights regional leaders in ecological preservation.

```{r}
#| label: State-wise Distribution

ramsar_clean |>
  count(StateName) |>
  mutate(Highlight = ifelse(n >= 10, "Top Tier", "Other")) |>
  ggplot(aes(x = n, y = reorder(StateName, n), fill = Highlight)) +
  geom_col(width = 0.8) +
  scale_fill_manual(values = c("Top Tier" = "#E63946", "Other" = "#2A9D8F")) +
  labs(
    title = "Regional Distribution of Wetlands",
    subtitle = "Tamil Nadu leads the geometric distribution with 20 sites",
    x = "Number of Designated Sites", y = NULL, fill = "Status"
  ) +
  theme_minimal() +
  theme(legend.position = "none",
        axis.text.y = element_text(size = 9, face = "bold"))
```

## The Size Spectrum: Are we protecting large basins or small habitats?

### What is the distribution of wetland sizes (Area), and are there "mega-wetlands" that skew the national average?

Transform the `Area` column to numeric and create a histogram or density plot.

Shows if India focuses on massive ecological systems or smaller, niche biodiversity hotspots.

```{r}
#| label: Large basins v/s small habitats
ggplot(ramsar_clean, aes(x = Area)) +
  geom_histogram(fill = "#264653", color = "white", bins = 20) +
  scale_x_log10(labels = comma) +
  labs(
    title = "Distribution of Wetland Area (Log Scale)",
    subtitle = "Analysis of size variance from small reserves to massive basins",
    x = "Area in Hectares (Log10)", y = "Frequency of Sites"
  ) +
  theme_minimal() +
  theme(panel.grid.minor = element_blank())
```

## Latitude & Area: The North-South Conservation Divide

### Is there a relationship between geographical latitude and the size of designated wetlands?

Helps visualize if northern (Himalayan) wetlands tend to be larger or smaller than southern/peninsular ones.

```{r}
#| label: geographical distribution
ggplot(ramsar_clean, aes(x = Latitude, y = Area)) +
  geom_point(aes(size = Area), color = "#2A9D8F", alpha = 0.5) +
  geom_smooth(method = "lm", color = "#E63946", se = FALSE, linetype = "dashed") +
  scale_y_log10(labels = comma) +
  labs(
    title = "Geospatial Area Trends",
    subtitle = "Correlation between Latitude and Wetland Scale",
    x = "Latitude (Degrees North)", y = "Area (Hectares)"
  ) +
  theme_minimal() +
  guides(size = "none")
```

## District-Level Granularity within Leading States

### Within the states with the most RAMSAR sites, are the wetlands clustered in specific districts or spread across the state?

Identifies "ecological hubs" at a local government level, which is useful for management authority analysis.

```{r}
#| label: Identifying ecological hubs
ramsar_clean |>
  filter(StateName == "Tamil Nadu") |>
  count(districtname) |>
  ggplot(aes(x = n, y = reorder(districtname, n))) +
  geom_segment(aes(x = 0, xend = n, yend = districtname), color = "#2A9D8F") +
  geom_point(size = 4, color = "#E63946") +
  labs(
    title = "Local Concentration: Tamil Nadu",
    subtitle = "District-wise breakdown of sites in India's leading RAMSAR state",
    x = "Number of Sites", y = NULL
  ) +
  theme_minimal() +
  theme(panel.grid.major.y = element_blank())
```
